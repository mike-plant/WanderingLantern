<!-- Upcoming Events Preview - Next 3 Events -->
{% if collections.previewEvents.length > 0 %}
<section id="upcoming-events-preview">
    <h2>Upcoming Events</h2>
    <div class="events-preview-grid">
        {% for event in collections.previewEvents %}
        <a href="{{ event.url }}" class="event-preview-card-link">
            <div class="event-preview-card {% if loop.first %}event-card-featured{% endif %} {% if event.data.status %}event-preview-card--{{ event.data.status }}{% elif event.data.date | isPastEvent %}event-preview-card--closed{% endif %}">
                {% if event.data.status %}
                <div class="event-status-badge event-status-badge--{{ event.data.status }}">
                    {% if event.data.status == 'cancelled' %}CANCELLED
                    {% elif event.data.status == 'full' %}FULL
                    {% endif %}
                </div>
                {% elif event.data.date | isPastEvent %}
                <div class="event-status-badge event-status-badge--closed">
                    CLOSED
                </div>
                {% endif %}
                <div class="event-preview-date">
                    <span class="date-month">{{ event.data.date | date('MMM') }}</span>
                    <span class="date-day">{{ event.data.date | date('D') }}</span>
                </div>
                <div class="event-preview-content">
                    <h3>{{ event.data.title }}</h3>
                    {% if loop.first and event.data.excerpt %}
                    <p class="event-excerpt">{{ event.data.excerpt }}</p>
                    {% endif %}
                    {% if event.data.time %}
                    <p class="event-time">{{ event.data.time }}</p>
                    {% endif %}
                    {% if event.data.ageRange %}
                    <span class="event-badge-small">Ages {{ event.data.ageRange }}</span>
                    {% endif %}
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
    <div class="events-preview-cta">
        <a href="/events/" class="cta-button secondary">View All Events</a>
    </div>
</section>
{% endif %}
